<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasha - Personal Assistant (Tailwind)</title>
    <meta name="title" content="Pasha - Personal Assistant (Tailwind)" />
    <meta name="description" content="Pasha, your personal assistant with a new Tailwind CSS interface." />
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="Pasha, Assistant, Chatbot, Tailwind CSS, Capacitor">

    <link rel="icon" type="image/png" href="assets/img/favicon/favicon.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link rel="stylesheet" href="assets/css/elevenlabs.css"> <!-- Kept for ElevenLabs specific styling, review if conflicts arise -->
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Amaranth:ital,wght@0,400;0,700;1,400;1,700&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js" integrity="sha256-eTyxS0rkjpLEo16uXTS0uVCS4815lc40K2iVpWDvdSY=" crossorigin="anonymous"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script> <!-- Included for compatibility with existing JS that might use it -->
    <script src="https://unpkg.com/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    <style>
        /* Custom scrollbar for chat (optional, but nice) */
        .chat-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .chat-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .chat-scrollbar::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-700 */
            border-radius: 4px;
        }
        .chat-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #2d3748; /* gray-800 */
        }

        /* Basic body styling */
        body {
            font-family: 'Open Sans', sans-serif;
            /* Ensure no default margin/padding interferes with full-screen layout */
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scroll on body */
        }
        .font-amaranth {
            font-family: 'Amaranth', sans-serif;
        }

        /* Placeholder for hero_bg1 - replace with your actual image or gradient */
        .hero_bg1_tailwind {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* Example gradient */
        }

        /* Placeholder for dotbg - replace with your actual dot pattern or background */
        .dotbg_tailwind {
            background-color: #1a202c; /* Example dark background */
            /* background-image: radial-gradient(#4a5568 1px, transparent 1px); Example dot pattern */
            /* background-size: 10px 10px; */
        }

        /* Ensure modals are on top */
        .settings-modal, .scheduler-modal {
            z-index: 50;
        }

        /* Specific styling for Pasha logo text if needed */
        .pashaLogoText {
            font-family: 'Amaranth', sans-serif;
            font-weight: 700;
            font-size: 1.75rem; /* Equivalent to h4 or a bit larger */
            color: white;
        }

        /* Custom styling for the clear chat button to position it */
        #chat-messages {
            position: relative; /* Needed for absolute positioning of the button */
        }
        .clear-chat-button {
            position: absolute;
            top: 1rem; /* 16px */
            right: 1rem; /* 16px */
            z-index: 10; /* Ensure it's above chat messages */
        }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'open-sans': ['"Open Sans"', 'sans-serif'],
              'amaranth': ['"Amaranth"', 'sans-serif'],
            },
            colors: {
              'pasha-blue': '#667eea',
              'pasha-purple': '#764ba2',
              'pasha-dark': '#1a202c',
              'pasha-gray': '#2d3748',
              'pasha-light-gray': '#4a5568',
            }
          }
        }
      }
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 antialiased">

<div class="bot_load fixed inset-0 bg-pasha-dark/90 backdrop-blur-sm flex flex-col items-center justify-center z-[100] p-4">
    <div class="pre_wrapper_clear text-center">
      <div class="nda_bar w-24 h-1 bg-pasha-blue mx-auto mb-4 rounded"></div>
      <h1 class="splash_intro font-amaranth text-5xl text-white mb-2">Pasha</h1>
      <h1 class="splash_intro_text text-xl text-gray-300 mb-6">First you need to enable your microphone</h1>
      <button id="startChatButton" class="btn btn-welcome bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
        ENABLE MICROPHONE
      </button>
  </div>
</div>

<section class="agent-section container-fluid min-h-screen flex flex-col lg:flex-row">
  <div class="agent_left hero_bg1_tailwind flex-grow lg:w-3/5 xl:w-2/3 order-1 lg:order-1 flex flex-col h-screen lg:max-h-screen">
    <div class="horizon_bot flex flex-col flex-grow h-full">
      <div class="msger horizon_hero flex flex-col flex-grow h-full p-0">
        <header class="msger-header-agent bg-black bg-opacity-20 text-white p-4 shadow-md">
          <div class="msger-header-content flex items-center">
            <svg class="w-8 h-8 mr-3" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path class="robot-icon fill-current text-white" d="M12 2C13.1 2 14 2.9 14 4L14 6C14 7.11 13.11 8 12 8C10.9 8 10 7.11 10 6L10 4C10 2.9 10.9 2 12 2M17 8C18.1 8 19 8.9 19 10L19 16C19 17.1 18.1 18 17 18L7 18C5.9 18 5 17.1 5 16L5 10C5 8.9 5.9 8 7 8L17 8M7 10C6.45 10 6 10.45 6 11C6 11.55 6.45 12 7 12C7.55 12 8 11.55 8 11C8 10.45 7.55 10 7 10M17 10C16.45 10 16 10.45 16 11C16 11.55 16.45 12 17 12C17.55 12 18 11.55 18 11C18 10.45 17.55 10 17 10M12 14C10.9 14 10 14.9 10 16L14 16C14 14.9 13.1 14 12 14Z"/>
            </svg>
            <div class="msger-header-title">
              <span class="pashaLogoText">Pasha</span>
            </div>
            <div id="loader" class="msger-header-options progress ml-auto w-1/4 h-2 bg-pasha-light-gray rounded overflow-hidden">
                <div class="bg-pasha-blue h-full" style="width: 50%;"></div> </div>
            <audio id="audioPlayer" controls class="hidden">Audio Player</audio>
          </div>
        </header>
        <main class="msger-chat-welcome flex-grow p-6 overflow-y-auto chat-scrollbar relative" id="chat-messages">
          <button id="clear-chat-btn" class="clear-chat-button bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-full text-xs shadow-lg transition duration-300" title="Clear Chat" aria-label="Clear chat messages">
            <i class="fas fa-trash-alt"></i>
          </button>
          <!-- Chat messages will be dynamically inserted here by JavaScript -->
        </main>
      </div>
    </div>
  </div>

  <div class="agent_right dotbg_tailwind flex flex-col lg:w-2/5 xl:w-1/3 order-2 lg:order-2 p-6 space-y-6 h-screen lg:max-h-screen overflow-y-auto">
    <div class="agent_screen flex-grow bg-pasha-dark bg-opacity-30 backdrop-blur-sm rounded-xl p-4 shadow-xl min-h-[200px] lg:min-h-[300px] flex flex-col items-center justify-center text-center">
        <div class="agent_controll mb-4 w-full">
            <div class="voice_status text-center p-3 bg-black bg-opacity-20 rounded-lg">
                <span id="voice-action" class="voiceSpan text-xl font-semibold text-gray-200">Ready</span>
            </div>
        </div>

        <div class="tool-call-output w-full flex-grow flex items-center justify-center">
            <p class="text-gray-400 text-lg">Tool outputs will appear here...</p>
            <!-- <div class="bg-white/10 p-4 rounded-lg w-full max-w-sm">
                <h3 class="text-white text-lg font-semibold mb-2">Weather</h3>
                <p class="text-gray-300">Sunny, 25Â°C</p>
            </div> -->
        </div>

        <div class="chronicle_mode hidden mt-4 w-full">
            <h3 class="text-lg font-semibold text-white mb-2">Chronicle Mode Active</h3>
            <div class="bg-black bg-opacity-20 p-3 rounded-lg text-gray-300">
                Chronicle entries will be displayed here.
            </div>
        </div>

        <div class="agent_s3 mt-auto pt-4 hidden">
             <p class="text-xs text-gray-500">LLM Selection Area</p>
        </div>
    </div>

    <div class="pasha-nav mt-auto"> <div class="nav-wrap">
        <div class="wrap-top mb-5 flex flex-col items-center space-y-3">
          <button class="push-talk-btn terminal-medium w-full max-w-xs bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg text-lg shadow-xl transition duration-300 ease-in-out transform hover:scale-105">
            PUSH TO TALK
          </button>
          <button class="pause-btn terminal-medium w-full max-w-xs bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-lg text-md shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
            PAUSE
          </button>
        </div>
        <div id="main_buttons" class="wrap-bottom">
          <div class="button-container grid grid-cols-2 sm:grid-cols-2 gap-3">
            <button id="chronicleModeBtn" class="circle-btn terminal-medium bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">CHRONICLE</button>
            <button id="schedulerBtn" class="circle-btn terminal-medium bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">SCHEDULER</button>
            <button id="messengerBtn" class="circle-btn terminal-medium bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">MESSENGER</button>
            <button id="settingsModeBtn" class="circle-btn terminal-medium bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">SETTINGS</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div id="settingsModal" class="settings-modal fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 hidden">
  <div class="bg-white dark:bg-pasha-dark rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden">
    <div class="settings-modal-header flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700">
      <h2 class="settings-modal-title text-2xl font-amaranth font-bold text-pasha-blue dark:text-pasha-purple">Settings</h2>
      <button id="closeSettingsBtn" class="settings-modal-close text-gray-400 hover:text-red-500 transition duration-150">
        <i class="fas fa-times fa-2x"></i>
      </button>
    </div>
    
    <div class="settings-modal-body grid md:grid-cols-2 gap-6 p-6 overflow-y-auto">
      <div class="settings-column space-y-6">
        <div class="settings-section">
          <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300 border-l-4 border-pasha-blue pl-2">Voice Settings</h3>
          <div class="settings-item space-y-3">
            <div>
              <label for="voiceSelect" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Voice:</label>
              <select id="voiceSelect" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
                <option value="default">Default</option>
                <option value="voice1">Voice 1 (Friendly Female)</option>
                <option value="voice2">Voice 2 (Calm Male)</option>
              </select>
            </div>
            <div>
              <label for="voiceSpeed" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Voice Speed:</label>
              <select id="voiceSpeed" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
                <option value="0.8">Slow</option>
                <option value="1.0" selected>Normal</option>
                <option value="1.2">Fast</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300 border-l-4 border-pasha-blue pl-2">Language Settings</h3>
          <div class="settings-item">
            <label for="language" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Language:</label>
            <select id="language" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
              <option value="en-US" selected>English (US)</option>
              <option value="es-ES">Spanish (EspaÃ±ol)</option>
              <option value="fr-FR">French (FranÃ§ais)</option>
            </select>
          </div>
        </div>
      </div>
      
      <div class="settings-column space-y-6">
        <div class="settings-section">
          <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300 border-l-4 border-pasha-blue pl-2">Interface Settings</h3>
          <div class="settings-item">
            <label for="theme" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Theme:</label>
            <select id="theme" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
              <option value="light" selected>Light</option>
              <option value="dark">Dark</option>
              <option value="auto">Auto (System)</option>
            </select>
          </div>
        </div>
        
        <div class="settings-section">
          <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300 border-l-4 border-pasha-blue pl-2">Notification Settings</h3>
          <div class="settings-item">
            <label for="notificationSound" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Notification Sound:</label>
            <select id="notificationSound" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
              <option value="default" selected>Default</option>
              <option value="silent">Silent</option>
              <option value="subtle">Subtle</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    
    <div class="settings-footer p-6 border-t border-gray-200 dark:border-gray-700 text-right">
      <button id="saveSettingsBtn" class="btn-save-settings bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300">Save Settings</button>
    </div>
  </div>
</div>

<div id="schedulerModal" class="scheduler-modal fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 hidden">
  <div class="bg-white dark:bg-pasha-dark rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden">
    <div class="scheduler-modal-header flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700">
      <h2 class="scheduler-modal-title text-2xl font-amaranth font-bold text-pasha-blue dark:text-pasha-purple">Scheduler</h2>
      <button id="closeSchedulerBtn" class="scheduler-modal-close text-gray-400 hover:text-red-500 transition duration-150">
        <i class="fas fa-times fa-2x"></i>
      </button>
    </div>
    
    <div class="scheduler-tabs flex border-b border-gray-200 dark:border-gray-700 px-6">
      <button id="calendarTab" class="scheduler-tab py-3 px-4 text-center font-semibold border-b-2 border-pasha-blue text-pasha-blue dark:text-pasha-purple dark:border-pasha-purple transition duration-150">Calendar</button>
      <button id="upcomingTab" class="scheduler-tab py-3 px-4 text-center font-semibold text-gray-500 dark:text-gray-400 hover:text-pasha-blue dark:hover:text-pasha-purple border-b-2 border-transparent hover:border-pasha-blue dark:hover:border-pasha-purple transition duration-150">Upcoming</button>
    </div>
    
    <div class="scheduler-modal-body grid lg:grid-cols-5 gap-0 flex-grow overflow-hidden">
      <div id="calendarColumn" class="scheduler-column lg:col-span-3 p-6 space-y-6 overflow-y-auto border-r-0 lg:border-r border-gray-200 dark:border-gray-700">
        <div class="calendar-container bg-gray-50 dark:bg-pasha-gray/50 p-4 rounded-lg shadow">
          <div class="calendar-header flex justify-between items-center mb-4">
            <div class="calendar-nav flex items-center space-x-2">
              <button id="prevMonth" class="calendar-btn p-2 rounded-md hover:bg-gray-200 dark:hover:bg-pasha-light-gray transition"><i class="fas fa-chevron-left"></i></button>
              <h3 class="current-month text-lg font-semibold w-32 text-center">May 2025</h3>
              <button id="nextMonth" class="calendar-btn p-2 rounded-md hover:bg-gray-200 dark:hover:bg-pasha-light-gray transition"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div class="calendar-view-toggle flex space-x-1 bg-gray-200 dark:bg-pasha-light-gray p-1 rounded-md">
              <button class="view-btn px-3 py-1 text-sm rounded-md bg-white dark:bg-pasha-gray text-pasha-blue dark:text-pasha-purple shadow">Month</button>
              <button class="view-btn px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-pasha-gray">Week</button>
              <button class="view-btn px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-pasha-gray">Day</button>
            </div>
          </div>
          <div class="calendar-grid grid grid-cols-7 gap-1 text-center">
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">SUN</div>
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">MON</div>
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">TUE</div>
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">WED</div>
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">THU</div>
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">FRI</div>
            <div class="calendar-day-header font-semibold text-xs text-gray-500 dark:text-gray-400 py-2">SAT</div>
            <div class="py-2 border border-transparent rounded-md hover:border-pasha-blue dark:hover:border-pasha-purple cursor-pointer">1</div>
            <div class="py-2 border border-transparent rounded-md hover:border-pasha-blue dark:hover:border-pasha-purple cursor-pointer">...</div>
            <div class="py-2 border border-pasha-blue dark:border-pasha-purple bg-pasha-blue/10 dark:bg-pasha-purple/20 rounded-md font-bold cursor-pointer">15</div>
             <div class="py-2 border border-transparent rounded-md text-gray-400 dark:text-gray-600">...</div>
          </div>
        </div>
        
        <div class="scheduler-section">
          <div class="flex justify-between items-center mb-3">
            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-300 border-l-4 border-pasha-blue pl-2">Create New Event</h3>
            <button id="quickAddBtn" class="text-sm bg-green-500 hover:bg-green-600 text-white font-semibold py-1 px-3 rounded-md transition">Quick Add</button>
          </div>
          <form id="newEventForm" class="space-y-4">
            <div class="scheduler-form-group">
              <label for="eventTitle" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Event Title</label>
              <input type="text" id="eventTitle" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue" placeholder="Enter event title">
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="scheduler-form-group">
                <label for="eventDate" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Date</label>
                <input type="date" id="eventDate" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
              </div>
              <div class="scheduler-form-group">
                <label for="eventType" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Type</label>
                <select id="eventType" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
                  <option value="meeting">Meeting</option>
                  <option value="travel">Travel</option>
                  <option value="personal">Personal</option>
                </select>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="scheduler-form-group">
                <label for="eventStart" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Start Time</label>
                <input type="time" id="eventStart" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
              </div>
              <div class="scheduler-form-group">
                <label for="eventEnd" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">End Time</label>
                <input type="time" id="eventEnd" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue">
              </div>
            </div>
            <div class="scheduler-form-group">
              <label for="eventLocation" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Location</label>
              <input type="text" id="eventLocation" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue" placeholder="Enter location">
            </div>
            <div class="scheduler-form-group">
              <label for="eventDescription" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Description</label>
              <textarea id="eventDescription" class="scheduler-form-control w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-pasha-gray focus:ring-pasha-blue focus:border-pasha-blue" rows="3" placeholder="Enter description"></textarea>
            </div>
            <button type="submit" class="schedule-event-btn w-full bg-pasha-blue hover:bg-pasha-purple text-white font-semibold py-3 px-4 rounded-lg shadow-md transition">Schedule Event</button>
          </form>
        </div>
      </div>
      
      <div id="upcomingColumn" class="scheduler-column lg:col-span-2 p-6 space-y-6 overflow-y-auto bg-gray-50 dark:bg-pasha-gray/30 hidden lg:block">
        <div class="scheduler-section">
          <h3 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300 border-l-4 border-green-500 pl-2">Upcoming Events</h3>
          <ul class="event-list space-y-3">
            <li class="event-item flex items-start p-3 bg-white dark:bg-pasha-gray rounded-lg shadow hover:shadow-md transition">
              <div class="event-indicator meeting w-3 h-3 bg-blue-500 rounded-full mr-3 mt-1.5 shrink-0"></div>
              <div class="event-content">
                <h4 class="event-title font-semibold text-gray-800 dark:text-gray-200">Product Team Meeting</h4>
                <div class="event-time text-xs text-gray-500 dark:text-gray-400"><i class="fas fa-clock event-icon mr-1"></i> May 21, 2025, 10:00 AM - 11:30 AM</div>
                <div class="event-location text-xs text-gray-500 dark:text-gray-400"><i class="fas fa-map-marker-alt event-icon mr-1"></i> Conference Room A</div>
              </div>
            </li>
            <li class="event-item flex items-start p-3 bg-white dark:bg-pasha-gray rounded-lg shadow hover:shadow-md transition">
              <div class="event-indicator travel w-3 h-3 bg-purple-500 rounded-full mr-3 mt-1.5 shrink-0"></div>
              <div class="event-content">
                <h4 class="event-title font-semibold text-gray-800 dark:text-gray-200">Flight to New York</h4>
                <div class="event-time text-xs text-gray-500 dark:text-gray-400"><i class="fas fa-clock event-icon mr-1"></i> May 23, 2025, 2:45 PM - 6:20 PM</div>
                <div class="event-location text-xs text-gray-500 dark:text-gray-400"><i class="fas fa-map-marker-alt event-icon mr-1"></i> SFO to JFK, Flight AA123</div>
              </div>
            </li>
          </ul>
        </div>
        </div>
    </div>
  </div>
</div>

    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-functions.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-storage.js"></script>

    <script>
        // Updated Firebase config to use environment variables or placeholders
        const firebaseConfig = {
          apiKey: "YOUR_API_KEY", // Replace with your actual Firebase API Key or use environment variables
          authDomain: "YOUR_AUTH_DOMAIN", // Replace with your actual Firebase Auth Domain
          databaseURL: "YOUR_DATABASE_URL", // Replace with your actual Firebase Database URL
          projectId: "YOUR_PROJECT_ID", // Replace with your actual Firebase Project ID
          storageBucket: "YOUR_STORAGE_BUCKET", // Replace with your actual Firebase Storage Bucket
          messagingSenderId: "YOUR_MESSAGING_SENDER_ID", // Replace with your actual Firebase Messaging Sender ID
          appId: "YOUR_APP_ID", // Replace with your actual Firebase App ID
          measurementId: "YOUR_MEASUREMENT_ID" // Replace with your actual Firebase Measurement ID
        };
        // Initialize Firebase
        if (typeof firebase !== 'undefined' && typeof firebase.initializeApp === 'function') {
            firebase.initializeApp(firebaseConfig);
        } else {
            console.error('Firebase SDK not loaded. Ensure firebase-app.js is included before this script.');
        }
    </script>

    <script src="assets/js/bundle.js"></script>
    <script src="assets/js/animations.js"></script>
    <script src="assets/js/language.js"></script>
    <script src="assets/js/interaction.js"></script>
    <script src="assets/js/pashaHelper.js"></script>
    <script src="assets/js/pashaSecondary.js"></script>
    <script type="module" src="assets/js/meetingController.js"></script>
    <script src="assets/js/schedulerController.js"></script>
    <script type="module" src="assets/js/settings_controller.js"></script>
    <script type="module" src="assets/js/elevenlabs_controller.js"></script>
    <script type="module" src="assets/js/context_manager.js"></script>
    <script type="module" src="assets/js/push_controller.js"></script> 

    <script type="module">
        import { ElevenLabsController } from './assets/js/elevenlabs_controller.js';
        import { MeetingController } from './assets/js/meetingController.js';
        import { ContextManager } from './assets/js/context_manager.js';
        import { SettingsController } from './assets/js/settings_controller.js';
        import { PushController } from './assets/js/push_controller.js';
        // Ensure schedulerController.js is loaded, it might not be a module
        // If SchedulerController is a global, it will be available on window

        document.addEventListener('DOMContentLoaded', () => {
            const botLoad = document.querySelector('.bot_load');
            const startChatButton = document.getElementById('startChatButton');
            const settingsModal = document.getElementById('settingsModal');
            const openSettingsBtn = document.getElementById('settingsModeBtn'); // Assuming this is your settings button
            const closeSettingsBtn = document.getElementById('closeSettingsBtn');
            const schedulerModal = document.getElementById('schedulerModal');
            const openSchedulerBtn = document.getElementById('schedulerBtn'); // Assuming this is your scheduler button
            const closeSchedulerBtn = document.getElementById('closeSchedulerBtn');
            const calendarTab = document.getElementById('calendarTab');
            const upcomingTab = document.getElementById('upcomingTab');
            const calendarColumn = document.getElementById('calendarColumn');
            const upcomingColumn = document.getElementById('upcomingColumn');


            // Check if microphone was previously enabled
            if (localStorage.getItem('microphoneEnabled') === 'true') {
                if(botLoad) botLoad.style.display = 'none';
                initializeControllers();
            } else {
                if (startChatButton && botLoad) {
                    startChatButton.addEventListener('click', async () => {
                        try {
                            await navigator.mediaDevices.getUserMedia({ audio: true });
                            localStorage.setItem('microphoneEnabled', 'true');
                            botLoad.style.display = 'none';
                            initializeControllers();
                        } catch (error) {
                            console.error('Error accessing microphone:', error);
                            const voiceStatus = document.getElementById('voice-action');
                            if(voiceStatus) voiceStatus.textContent = 'Microphone access denied. Please enable it in browser settings.';
                            else alert('Microphone access is required for this application.'); // Fallback alert
                        }
                    });
                } else {
                    if(botLoad) botLoad.style.display = 'none'; // Hide loader if button not found but mic was enabled
                    initializeControllers(); // Initialize if mic already enabled or no button
                }
            }

            async function initializeControllers() {
                try {
                    // Ensure Firebase is initialized before accessing firestore
                    if (!firebase.apps.length) {
                        firebase.initializeApp(firebaseConfig); 
                    }
                    const db = firebase.firestore();

                    console.log('ð§  Initializing Context Manager...');
                    const contextManager = new ContextManager(db);
                    window.contextManager = contextManager;

                    console.log('âï¸ Initializing Settings Controller...');
                    const settingsController = new SettingsController(contextManager);
                    window.settingsController = settingsController;

                    console.log('ð Initializing ElevenLabs Controller...');
                    const elevenLabsController = new ElevenLabsController(contextManager);
                    window.elevenLabsController = elevenLabsController;
                    await elevenLabsController.init();

                    console.log('ð Initializing Meeting Controller...');
                    const meetingController = new MeetingController(db);
                    window.meetingController = meetingController;
                    await meetingController.init();

                    console.log('ð Initializing Push Controller...');
                    const pushController = new PushController(); // Assuming no db needed for constructor
                    window.pushController = pushController;
                    // await pushController.init(); // If there's an init method

                    // Initialize scheduler controller (assuming it's a global or correctly imported)
                    if (typeof SchedulerController === 'function') {
                        window.schedulerController = new SchedulerController();
                        // window.schedulerController.init(); // If there's an init method
                    } else {
                        console.error('SchedulerController not defined or not a function.');
                    }

                    console.log("Pasha (Tailwind UI) Initialized with all controllers");
                    initializeClearChat();
                    initializeModals(); // Ensure this function is defined and handles Tailwind modals
                    // Add any other initializations from index_previous.html's script block

                } catch (error) {
                    console.error("Error initializing controllers:", error);
                }
            }

            function initializeClearChat() {
                const clearChatBtn = document.getElementById('clear-chat-btn');
                const chatMessagesContainer = document.getElementById('chat-messages'); // Ensure this is the correct ID

                if (clearChatBtn && chatMessagesContainer) {
                    clearChatBtn.addEventListener('click', function() {
                        // Consider using a Tailwind modal for confirmation instead of window.confirm
                        if (window.confirm('Are you sure you want to clear the chat?')) {
                            chatMessagesContainer.innerHTML = ''; // Clear messages
                            // Optionally, add back the initial Pasha welcome message or a placeholder
                            // Example: addPashaMessage("Chat cleared. How can I help you now?");
                            localStorage.removeItem('chatHistory'); // Clear chat history from local storage
                            console.log('Chat cleared.');
                        }
                    });
                } else {
                    console.warn('Clear chat button or chat messages container not found.');
                }
            }

            function initializeModals() {
                // Settings Modal
                const settingsModal = document.getElementById('settingsModal');
                const openSettingsBtn = document.getElementById('settingsModeBtn');
                const closeSettingsBtn = document.getElementById('closeSettingsBtn');
                const saveSettingsBtn = document.getElementById('saveSettingsBtn');

                if (openSettingsBtn && settingsModal && closeSettingsBtn) {
                    openSettingsBtn.addEventListener('click', () => settingsModal.classList.remove('hidden'));
                    closeSettingsBtn.addEventListener('click', () => settingsModal.classList.add('hidden'));
                    // Add event listener for saveSettingsBtn if it exists and has functionality
                    if (saveSettingsBtn) {
                        saveSettingsBtn.addEventListener('click', () => {
                            // Implement save settings logic here
                            console.log('Settings saved (placeholder)');
                            settingsModal.classList.add('hidden');
                        });
                    }
                }

                // Scheduler Modal
                const schedulerModal = document.getElementById('schedulerModal');
                const openSchedulerBtn = document.getElementById('schedulerBtn');
                const closeSchedulerBtn = document.getElementById('closeSchedulerBtn');
                const calendarTab = document.getElementById('calendarTab');
                const upcomingTab = document.getElementById('upcomingTab');
                const calendarColumn = document.getElementById('calendarColumn');
                const upcomingColumn = document.getElementById('upcomingColumn');

                if (openSchedulerBtn && schedulerModal && closeSchedulerBtn) {
                    openSchedulerBtn.addEventListener('click', () => schedulerModal.classList.remove('hidden'));
                    closeSchedulerBtn.addEventListener('click', () => schedulerModal.classList.add('hidden'));

                    if (calendarTab && upcomingTab && calendarColumn && upcomingColumn) {
                        calendarTab.addEventListener('click', () => {
                            calendarColumn.classList.remove('hidden');
                            upcomingColumn.classList.add('hidden');
                            calendarTab.classList.add('border-pasha-blue', 'text-pasha-blue', 'dark:border-pasha-purple', 'dark:text-pasha-purple');
                            calendarTab.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                            upcomingTab.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                            upcomingTab.classList.remove('border-pasha-blue', 'text-pasha-blue', 'dark:border-pasha-purple', 'dark:text-pasha-purple');
                        });
                        upcomingTab.addEventListener('click', () => {
                            upcomingColumn.classList.remove('hidden');
                            calendarColumn.classList.add('hidden');
                            upcomingTab.classList.add('border-pasha-blue', 'text-pasha-blue', 'dark:border-pasha-purple', 'dark:text-pasha-purple');
                            upcomingTab.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                            calendarTab.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                            calendarTab.classList.remove('border-pasha-blue', 'text-pasha-blue', 'dark:border-pasha-purple', 'dark:text-pasha-purple');
                        });
                    }
                }
                // Add logic for other modals if any
            }

            // Add any other global event listeners or functions from index_previous.html that are needed
            // For example, theme switching logic, etc.

        });
    </script>
</body>
</html>
